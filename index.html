<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Trading Table | $10K Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        
        :root {
            --bg-dark: #040d1a;
            --card-dark: #0a192f;
            --teal: #64ffda;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: #e6f1ff;
        }
        
        .trading-card {
            background-color: var(--card-dark);
            border: 1px solid rgba(100, 255, 218, 0.1);
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.05);
        }

        .glow-teal:focus {
            border-color: var(--teal) !important;
            ring-color: var(--teal) !important;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.2);
        }

        .btn-teal {
            background-color: var(--teal);
            color: #040d1a;
            transition: all 0.3s ease;
        }

        .btn-teal:hover {
            background-color: #4cd6b3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }

        .header-gradient {
            background: linear-gradient(135deg, #040d1a 0%, #1a2a6c 100%);
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div id="app" class="max-w-2xl mx-auto">
        <header class="text-center mb-10 p-6 rounded-xl header-gradient border-b-2 border-[#64ffda]">
            <img src="logo.png" alt="The Trading Table Logo" class="h-20 mx-auto mb-4 drop-shadow-[0_0_8px_rgba(100,255,218,0.5)]">
            <h1 class="text-3xl font-extrabold text-white tracking-wider uppercase">
                $10K Challenge
            </h1>
            <p class="mt-2 text-md text-[#64ffda] font-semibold tracking-wide">PnL Auto-Submitter</p>
        </header>

        <div class="trading-card p-8 rounded-xl mb-8">
            <h2 class="text-xl font-bold mb-6 text-[#64ffda] border-b border-gray-700 pb-2">Your Daily Trading Entry</h2>
            <form id="pnl-form" class="space-y-6">
                <div>
                    <label for="displayName" class="block text-sm font-semibold text-gray-300 mb-2">Trading Alias</label>
                    <input type="text" id="displayName" required placeholder="Enter your name"
                           class="mt-1 block w-full rounded-md bg-[#112240] border-gray-600 text-white glow-teal p-3 border focus:outline-none">
                </div>
                <div>
                    <label for="pnlAmount" class="block text-sm font-semibold text-gray-300 mb-2">Daily PnL ($)</label>
                    <input type="number" id="pnlAmount" required placeholder="e.g., 150.00 or -50.00" step="0.01"
                           class="mt-1 block w-full rounded-md bg-[#112240] border-gray-600 text-white glow-teal p-3 border focus:outline-none">
                </div>
                <div>
                    <label for="note" class="block text-sm font-semibold text-gray-300 mb-2">Insight / Lesson Learned</label>
                    <textarea id="note" rows="3" placeholder="What did you learn today?"
                              class="mt-1 block w-full rounded-md bg-[#112240] border-gray-600 text-white glow-teal p-3 border focus:outline-none"></textarea>
                </div>
                <button type="submit" id="submit-button"
                        class="w-full flex justify-center py-4 px-4 rounded-md shadow-lg text-lg font-bold btn-teal transition duration-150 ease-in-out">
                    Submit to Discord
                </button>
            </form>
        </div>
        
        <footer class="text-center text-gray-500 text-sm">
            &copy; 2026 THE TRADING TABLE | Consistency is Key.
        </footer>
    </div>

    <div id="message-modal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4">
        <div class="bg-[#0a192f] border-2 border-[#64ffda] p-8 rounded-lg shadow-2xl max-w-sm w-full text-center">
            <h3 id="modal-title" class="text-xl font-bold mb-3 text-white">Message</h3>
            <p id="modal-content" class="text-gray-300 mb-6"></p>
            <button onclick="closeModal()" class="w-full py-3 px-4 btn-teal rounded-md font-bold">Understood</button>
        </div>
    </div>

    <script>
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1429837876081983489/iE2TxKL79iUK0O2S7-hexqeiVKrwFWXeKHWx3xmnOKSBM4EZ_g0OjFapM3KnDBTbKrM5"; 

        const submitButton = document.getElementById('submit-button');

        function showModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-content').textContent = content;
            document.getElementById('message-modal').classList.remove('hidden');
        }

        window.closeModal = function() {
            document.getElementById('message-modal').classList.add('hidden');
        }

        function setButtonLoading(isLoading) {
            submitButton.disabled = isLoading;
            submitButton.textContent = isLoading ? 'Syncing...' : 'Submit to Discord';
            submitButton.style.opacity = isLoading ? '0.5' : '1';
        }

        async function sendDiscordWebhook(name, pnl, note, webhookUrl) {
            setButtonLoading(true);

            const amount = parseFloat(pnl);
            const isPositive = amount >= 0;
            const absAmount = Math.abs(amount).toFixed(2);
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            
            // Discord colors: Teal/Green (3066993), Red (15158332)
            const color = isPositive ? 3066993 : 15158332;

            const payload = {
                username: `Challenge Tracker`,
                avatar_url: "https://lsanders-collab.github.io/thetradingtableevents/logo.png",
                embeds: [{
                    title: `ðŸŽ¯ $10K Challenge Entry: ${name.trim()}`,
                    color: color,
                    fields: [
                        { name: "Daily PnL", value: `**${isPositive ? '+$' : '-$'}${absAmount}**`, inline: true },
                        { name: "Date", value: today, inline: true }
                    ],
                    footer: { text: "The Trading Table | Discipline. Consistency. 'Pay'tience." }
                }]
            };

            if (note.trim()) {
                payload.embeds[0].fields.push({
                    name: "Key Insight",
                    value: `*${note.trim()}*`,
                    inline: false
                });
            }

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                });

                if (response.ok) {
                    showModal('Success!', `Entry posted. Keep following the plan!`);
                    document.getElementById('pnl-form').reset();
                } else {
                    showModal('Error', `Could not post. Error Code: ${response.status}`);
                }
            } catch (error) {
                showModal('Network Error', 'Check your connection and try again.');
            } finally {
                setButtonLoading(false);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('pnl-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('displayName').value;
                const pnl = document.getElementById('pnlAmount').value;
                const note = document.getElementById('note').value;
                sendDiscordWebhook(name, pnl, note, WEBHOOK_URL);
            });
        });
    </script>
</body>
</html>
